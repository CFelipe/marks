{% extends "base.html" %}
{% load filters %}

{% block page_info %}
    <span class="green-and-bold">
    ·
    {{ username }}
    {% if tags %}
    ·
    {% endif %}
    </span>
    {% for tag in tags %}
        <span class="tag">
            {% if tags|length > 1 %}
            <a class="action" href="{% url 'user_tag' slug=tags|remove_tag:tag username=username %}">x</a>
            {% else %}
            <a class="action" href="{% url 'user_index' username=username %}">x</a>
            {% endif %}
            <a href="#">{{ tag }}</a>
        </span>
        {% if not forloop.last %}
            <span class="plus">&</span>
        {% endif %}
    {% endfor %}
{% endblock %}

{% block content %}

<div class="marginbottom">
    {% if query %}
    <span class="tag big query"><a href="#">{{ query }}</a></span>
    {% endif %}

</div>

<!--
<div>sorting by {{ sort }}</div>
<ul class="sort">
    {% if sort != "name" %}<li><a href="?sort=name">name</a></li>{% endif %}
    {% if sort != "date" %}<li><a href="?sort=date">date</a></li>{% endif %}
</ul>
-->

<ul>
{% for mark in marks %}
{% include "mark.html" %}
{% endfor %}
</ul>

<ul id="marks">
    {% for tag in tag_count %}
    {% if tag.name not in tags %}
    <li class="item">
    <span class="tag">
        <a class="action" href="{% url 'user_tag' slug=tags|add_tag:tag.name username=username %}">+</a>
        <a class="tag_name" href="{% url 'user_tag' slug=tag.name username=username %}">{{ tag.name }}</a>
    </span>
    <span class="number">{{ tag.num_marks }}</span>
    </li>
    {% endif %}
    {% endfor %}

</ul>


{% comment %}
<form id="bulk_form" action="/felipecortez/bulk/" method="POST">
    <label for="form_tags">Change tags</label>
    <input id="form_tags" name="tags" type="text">
    <input type="submit" value="Change">
</form>
{% endcomment %}

{% endblock %}
