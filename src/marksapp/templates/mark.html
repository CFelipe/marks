{% load filters %}

<li class="item">
    {% comment %}
    <input name="check_mark" type="checkbox" value="{{ mark.id }}">
    {% endcomment %}
    {% if mark.url %}
    <a href="{{ mark.url }}">{{ mark.name }}</a>
    {% else %}
    {{ mark.name }}
    {% endif %}
    {% for tag in mark.tags.all %}
    <span class="tag">
        {% if not search and tag.name not in tags %}
        <a class="action"
           href="{% url 'user_tag' slug=tags|add_tag:tag.name username=username %}"
           rel="keep-params">+</a>
        {% endif %}
        <a href="{% url 'user_tag' slug=tag.name username=username %}"
           rel="keep-params">{{ tag.name }}</a>
    </span>
    {% endfor %}
    {% if user.is_authenticated and user.username == username %}
    <span class="separator">&#183;</span>
    <span class="action"><a mark_id="{{ mark.id }}" class="info_btn" href="#" title="{{ mark.date_added }}">info</a></span>
    <span class="action"><a mark_id="{{ mark.id }}" class="edit_btn" href="#">edit</a></span>
    <span class="action"><a mark_id="{{ mark.id }}" class="delete_btn" href="#">delete</a></span>
    <span class="action"><a mark_id="{{ mark.id }}" class="bump_btn" href="#">bump</a></span>
    {% endif %}
    {% if mark.description %}
    <div class="description-container" mark_id="{{ mark.id }}">
        <div class="triangle"></div>
        <div class="description">
            {{ mark.description|markdown|safe }}
        </div>
    </div>
    {% endif %}
</li>
